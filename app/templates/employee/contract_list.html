{% extends "base.html" %}
{% block title %}Contracts{% endblock %}
{% block content %}
<div class="page-header d-flex justify-content-between align-items-center">
    <div><h1><i class="bi bi-file-earmark-text me-2 text-accent"></i>Contracts</h1></div>
    <a href="{{ url_for('employee.create_contract') }}" class="btn btn-accent"><i class="bi bi-plus-circle me-2"></i>Add</a>
</div>
<div class="card"><div class="card-body p-0">
<table class="table table-hover mb-0">
<thead><tr><th>ID</th><th>Series</th><th>Per Episode</th><th>Start Date</th><th>End Date</th><th>Actions</th></tr></thead>
<tbody>
{% for c in contracts %}
<tr>
    <td><code>{{ c.CONTRACT_ID }}</code></td>
    <td>{{ c.WS_NAME }}</td>
    <td>${{ "{:,.2f}".format(c.PER_EP_CHARGE) }}</td>
    <td>{{ c.CONTRACT_ST_DATE.strftime('%Y-%m-%d') if c.CONTRACT_ST_DATE else 'N/A' }}</td>
    <td>{{ c.CONTRACT_END_DATE.strftime('%Y-%m-%d') if c.CONTRACT_END_DATE else 'N/A' }}</td>
    <td>
        <div class="btn-group btn-group-sm">
            <a href="{{ url_for('employee.edit_contract', contract_id=c.CONTRACT_ID) }}" class="btn btn-dark"><i class="bi bi-pencil"></i></a>
            <form method="POST" action="{{ url_for('employee.delete_contract', contract_id=c.CONTRACT_ID) }}" class="d-inline" onsubmit="return confirm('Delete?')">
                <button type="submit" class="btn btn-dark text-danger"><i class="bi bi-trash"></i></button>
            </form>
        </div>
    </td>
</tr>
{% else %}
<tr><td colspan="6" class="text-center text-muted py-4">No contracts.</td></tr>
{% endfor %}
</tbody>
</table>
</div></div>
{% endblock %}
